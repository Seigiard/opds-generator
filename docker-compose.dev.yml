services:
  opds:
    build:
      context: .
      target: development
    ports:
      - "8080:8080"
    volumes:
      - ./src:/app/src:ro
      - ./static:/app/static:ro
      - ./files:/books:ro
      - ./data:/data
    environment:
      - FILES=/books
      - DATA=/data
      - PORT=8080
      - BASE_URL=http://localhost:8080
      - DEV_MODE=true
    command: ["bun", "run", "--watch", "src/server.ts"]
